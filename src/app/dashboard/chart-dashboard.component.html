<div class="bg-white rounded-xl shadow-lg border border-slate-100 p-6 animate-fade-in-up">
  <div class="flex justify-between items-center mb-6">
    <div>
      <h3 class="text-2xl font-bold text-slate-800 flex items-center gap-2">ğŸ“Š ç™¼é€æˆæ•ˆç›£æ§</h3>
      <p class="text-slate-500 text-sm mt-1">2026 Q1-Q2 é›™è»¸åˆ†æå ±è¡¨ (Volume vs Success Rate)</p>
    </div>
  </div>

  <div class="h-[450px]">
    @if (loading) {
      <div class="flex justify-center h-full items-center">
        <kendo-loader type="infinite-spinner" themeColor="primary" size="large"> </kendo-loader>
      </div>
    }
    @if (!loading) {
      <kendo-chart [categoryAxis]="{ categories: categoryData }">
        <kendo-chart-tooltip [shared]="true">
          <ng-template kendoChartSharedTooltipTemplate let-category="category" let-points="points">
            <div class="bg-white p-3 shadow-xl border border-slate-100 rounded-lg text-sm">
              <div class="font-bold text-slate-700 mb-2 border-b pb-1">{{ category }} æœˆæ•¸æ“š</div>
              @for (point of points; track point.series.name) {
                <div class="flex justify-between gap-4 py-1">
                  <span class="text-slate-500 flex items-center gap-2">
                    <span
                      class="w-2 h-2 rounded-full"
                      [style.background-color]="point.series.color"
                    ></span>
                    {{ point.series.name }}
                  </span>
                  <span class="font-bold font-mono text-slate-700">
                    {{
                      point.series.name === 'æˆåŠŸç‡' ? point.value + '%' : (point.value | number)
                    }}
                  </span>
                </div>
              }
            </div>
          </ng-template>
        </kendo-chart-tooltip>

        <kendo-chart-value-axis>
          <kendo-chart-value-axis-item name="volumeAxis">
            <kendo-chart-value-axis-item-title text="ç™¼é€ç¸½æ•¸"></kendo-chart-value-axis-item-title
          ></kendo-chart-value-axis-item>
          <kendo-chart-value-axis-item name="rateAxis" [min]="95" [max]="100">
            <kendo-chart-value-axis-item-title text="æˆåŠŸç‡(%)"></kendo-chart-value-axis-item-title
          ></kendo-chart-value-axis-item>
        </kendo-chart-value-axis>

        <kendo-chart-series>
          <kendo-chart-series-item
            type="column"
            [data]="chartData"
            field="volume"
            categoryField="month"
            name="ç™¼é€é‡"
            axis="volumeAxis"
            color="#3B82F6"
            [gap]="0.5"
            [opacity]="0.9"
          >
          </kendo-chart-series-item>

          <kendo-chart-series-item
            type="line"
            [data]="chartData"
            field="rate"
            categoryField="month"
            name="æˆåŠŸç‡"
            axis="rateAxis"
            color="#EF4444"
            [width]="3"
          >
            <kendo-chart-series-item-markers
              type="circle"
              background="#EF4444"
              [size]="6"
              [border]="{ color: 'green', width: 2 }"
            ></kendo-chart-series-item-markers>
          </kendo-chart-series-item>
        </kendo-chart-series>
      </kendo-chart>
    }
  </div>
</div>
